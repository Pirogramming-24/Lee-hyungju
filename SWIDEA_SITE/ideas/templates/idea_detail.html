{% extends "main.html" %}
{% load static %}
{% block content %}

<div class="idea-detail-page">
  <section class="idea-detail-card">

    <!-- 상단 타이틀 -->
    <header class="idea-detail-header">
      <h1 class="idea-detail-title">Idea Detail</h1>
    </header>

    <!-- 본문 박스(테두리) -->
    <div class="idea-detail-body">
      <div class="idea-detail-grid">

        <!-- 좌측: 썸네일 -->
        <div class="idea-detail-thumb">
          <button
            type="button"
            class="star-btn {% if idea.id in starred_ids %}is-filled{% else %}is-empty{% endif %}"
            data-url="{% url 'ideas:idea_star_toggle_api' idea.pk %}"
          >
            <span class="star-icon">
              {% if idea.id in starred_ids %}
                <!-- 채워진 별 SVG -->
                <svg viewBox="0 0 24 24" width="18" height="18">
                  <path fill="currentColor" d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.61L12 2l2.81 6.63 7.19.61-5.46 4.76 1.64 7.03z"/>
                </svg>
              {% else %}
                <!-- 빈 별 SVG -->
                <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="none" stroke="currentColor" stroke-width="2"
                  d="M12 2l2.81 6.63 7.19.61-5.46 4.76 1.64 7.03L12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.61z"/>
                </svg>
              {% endif %}
            </span>
          </button>

          {% if idea.image %}
            <img src="{{ idea.image.url }}" alt="{{ idea.title }}">
          {% else %}
            <div class="idea-thumb-placeholder"></div>
          {% endif %}
        </div>

        <!-- 우측: 정보 -->
        <div class="idea-detail-info">
          <h2 class="idea-title">{{ idea.title }}</h2>

          <dl class="idea-meta">
            <div class="meta-row">
              <dt>관심도</dt>
              <dd>{{ idea.interest }}</dd>
            </div>

            <div class="meta-row">
              <dt>예상 개발 툴</dt>
              <dd>
                <a class="meta-link" href="{% url 'ideas:devtool_detail' idea.devtool.id %}">
                  {{ idea.devtool }}
                </a>
              </dd>
            </div>

            <div class="meta-row meta-row--content">
              <dt>아이디어 설명</dt>
              <dd class="meta-content">{{ idea.content }}</dd>
            </div>
          </dl>
        </div>

      </div>
    </div>

    <!-- 하단 버튼 -->
    <div class="idea-detail-actions">
      <form action="{% url 'ideas:idea_delete' idea.id %}" method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">삭제</button>
      </form>

      <a class="btn btn-ghost" href="{% url 'ideas:ideas_list' %}">목록</a>
      <a class="btn btn-primary" href="{% url 'ideas:idea_update' idea.id %}">수정</a>
    </div>

  </section>
</div>

{% endblock content %}
